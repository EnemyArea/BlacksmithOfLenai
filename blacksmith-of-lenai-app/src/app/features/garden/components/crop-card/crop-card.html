<app-page-card>
  @if (!gardenField().isPurchased) {
    <h2 class="card-title">Kaufen</h2>
    <p>ðŸª™ {{ gardenField().price | money }}</p>
    <div class="flex flex-row flex-wrap gap-1 items-stretch">
      <button class="btn">ðŸ’°</button>
    </div>
  } @else {
    @if (gardenField().gardenCrop; as gardenCrop) {
      <h2 class="card-title">
        {{ gardenCrop.gardenCropName }}
      </h2>

      @if (gardenField().playerSkillExperience; as playerSkillExperience) {
        <app-skill-rating [playerSkillExperience]="playerSkillExperience" />
      }

      @if (!isCompleted()) {
        <app-crop-status-bar
          [isIrrigated]="gardenField().isIrrigated"
          [isFertilized]="gardenField().isFertilized" />
      }

      <app-countdown
        (completedOutput)="onCountdownCompleted()"
        [initialTime]="gardenField().timePassed ?? 0" />

      <app-action-costs
        [experience]="gardenCrop.experience"
        [jobExperience]="gardenCrop.jobExperience"
        [jobType]="gardenCrop.jobType" />

      <div class="grid grid-cols-4 gap-1">
        <button class="btn text-nowrap" [disabled]="!canHarvested()">
          ðŸ§º
          <app-energy-display [energy]="gardenCrop.energyCostsHarvest" />
        </button>
        <button class="btn text-nowrap" [disabled]="!canReplanted()">
          ðŸŒ±
          <app-energy-display [energy]="gardenCrop.energyCostsReplant" />
        </button>
        <button
          class="btn text-nowrap"
          [disabled]="!canIrrigated()"
          (click)="irrigateCropHandler()">
          ðŸ’§
          <app-energy-display [energy]="gardenCrop.energyCostsIrrigation" />
        </button>
        <button
          class="btn text-nowrap"
          [disabled]="!canFertilized()"
          (click)="fertilizeCropHandler()">
          âŒ›
          <app-energy-display [energy]="gardenCrop.energyCostsFertilize" />
        </button>
      </div>
    } @else {
      <h2 class="card-title">Nichts gepflanzt</h2>
      <p>Min. Stufe 3 Landwirtschaft</p>
      <div class="flex flex-row flex-wrap gap-1 items-stretch">
        <button class="btn">ðŸŒ±</button>
      </div>
    }
  }
</app-page-card>
